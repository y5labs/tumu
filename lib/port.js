import crypto from 'crypto'

const range = n => Array.from({ length: n }, (_, i) => i)
const ok_ports = [
  ...range(13).map(i => 3000 + i), 3020, 3025, 3030, 3039, 3050, 3090, 3093, 3099, 3100, 3128, 3200, 3300, 3306, 3330, 3333, 3334, 3335, 3535, 3621, 3778, 3791, 4000, 4001, 4002, 4003, 4018, 4021, 4040, 4100, 4200, 4201, 4202, 4203, 4207, 4209, 4211, 4232, 4242, 4250, 4300, 4400, 4443, 4444, 4500, 4502, 4503, 4567, 4568, 4600, 4702, 5000, 5001, 5002, 5003, 5005, 5006, 5010, 5015, 5020, 5026, 5050, 5051, 5200, 5250, 5443, 5500, 5501, 5502, 5757, 5790, 6006, 6007, 6009, 6010, 6060, 6080, 6567, 7000, 7001, 7005, 7009, 7071, 7072, 7152, 7200, 7443, 7456, 7774, 7777, 8000, 8001, 8002, 8003, 8004, 8005, 8007, 8008, 8011, 8020, 8031, 8050, 8063, 8070, ...range(13).map(i => 8080 + i), 8096, 8100, 8101, 8103, 8108, 8443, 8500, 8686, 8760, 8800, 8848, 8887, 8888, 8889, 8890, 8899, ...range(101).map(i => 9000 + i), ...range(201).map(i => 9200 + i), 9601, 9606, 9876, 9877, 9880, 9898, ...range(100).map(i => 9900 + i)
]

export default s => ok_ports[crypto.createHash('md5').update(s).digest().readUInt16BE(14) % ok_ports.length]